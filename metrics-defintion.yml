entities:
  #the entity name should combine hostEntityId:service_name 
  - name: 
      add_hostEntityID: true
      metric_label:
        - wmi_service_start_mode: name
    type: WindowsService
    display_name:
      - wmi_service_start_mode: display_name
    properties:
      #Static Entity metadata taken from metrics labels
      metrics_label_to_dimensions:
        - wmi_service_start_mode: [name, display_name, process_pid]
      #Static Entity metadata taken from metrics labels on value
      metrics_label_to_dimensions_on_value:
        - wmi_service_start_mode: 
          - start_mode: 1
        - wmi_service_state:
          - state: 1
        - wmi_service_status:
          - status: 1
    metrics:
        - provider_name: wmi_service_start_mode
          type: gauge
          nrdb_name: startMode
          unit: Count
          skip_on_value: 0
          properties:
            dimensions: start_mode
        - provider_name: wmi_service_state
          type: gauge
          nrdb_name: state
          unit: Count
          skip_on_value: 0
          properties:
            dimensions: state
        - provider_name: wmi_service_status
          type: gauge
          nrdb_name: status
          unit: Count
          skip_on_value: 0
          properties:
            dimensions: status

##TODO remove this examples
# # HELP wmi_service_start_mode The start mode of the service (StartMode)
# # TYPE wmi_service_start_mode gauge
# wmi_service_start_mode{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",start_mode="auto"} 1
# wmi_service_start_mode{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",start_mode="boot"} 0
# wmi_service_start_mode{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",start_mode="disabled"} 0
# wmi_service_start_mode{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",start_mode="manual"} 0
# wmi_service_start_mode{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",start_mode="system"} 0

# # HELP wmi_service_state The state of the service (State)
# # TYPE wmi_service_state gauge
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="continue pending"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="pause pending"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="paused"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="running"} 1
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="start pending"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="stop pending"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="stopped"} 0
# wmi_service_state{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",state="unknown"} 0
# # HELP wmi_service_status The status of the service (Status)
# # TYPE wmi_service_status gauge
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="degraded"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="error"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="lost comm"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="no contact"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="nonrecover"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="ok"} 1
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="pred fail"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="service"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="starting"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="stopping"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="stressed"} 0
# wmi_service_status{display_name="Remote Procedure Call (RPC)",name="rpcss",process_id="668",status="unknown"} 0
